define(["jquery","search","modal","LoadedScrollAjax","requestAjax","popover","reload","mmenu","tiny-slider","timeago","fancybox","bootstrap","plagins","anime","rating","videoPlayer","social-likes"],function(n,t,e,a,o,r,d,i){"use strict";function s(a){a.each(function(){var a=n(this);a.data("SearchAjax")||a.data("SearchAjax",new t({inputID:a,minQueryLen:a.data("search-min-query-len"),searchID:a.data("search-id"),remember:a.data("search-remember"),rememberIcon:a.data("search-remember-icon"),params:{url:a.data("ajax-url"),method:"GET",dataType:"json",cache:!1,data:{params:!!a.data("ajax-appear-params")&&a.data("ajax-appear-params"),limit:a.data("loaded-scroll-limit")}},arrow:a.data("search-arrow"),isToken:a.data("search-token"),searchContainer:a.data("search-container"),arrowClassActive:a.data("search-arrow-active"),constraints:a.data("search-constraints")}))})}function c(a,t){var e,o=n.extend({},{items:3,navText:!1,margin:0},a);if(!(e=t?t.find(o.id?o.id:".owl-carousel"):n(o.id?o.id:".owl-carousel")).data("owl.carousel"))return e.each(function(){var a=n(this),t=n.extend({},o,n(this).data("options"));t.startPosition=t.startPositions?t.startPositions:0,t.margin=parseInt(t.margin),a.owlCarousel(t)}),e}function l(a){function e(a){var t=a.container.querySelectorAll(".tns-slide-active .tns-lazy-img");t&&Array.prototype.forEach.call(t,function(a){a.classList.contains("loaded")||(a.style.backgroundImage="url("+a.getAttribute("data-src")+")",a.classList.add("loaded"))})}var t=document.querySelectorAll(a.id);Array.prototype.forEach.call(t,function(a){var t=[];a.classList.contains("tns-carousel")||(a.hasAttribute("data-options")&&(t=JSON.parse(a.getAttribute("data-options"))),t.container=a,t.onInit=e,tns(t).events.on("indexChanged",e))})}n(document).on("click",".modal-btn",function(){var a=n(this);new e({element:a,url:a.data("ajax-url"),ajax:a.hasClass("modal.ajax"),requestMethod:a.data("ajax-method")?a.data("ajax-method"):"GET",dataType:a.data("ajax-type")?a.data("ajax-type"):"json",data:a.hasClass("reappear")?a.data("ajax-reappear-params"):a.data("ajax-appear-params"),append:a.data("ajax-append"),replaceUrl:a.data("replace-url"),header:a.data("modal-header"),modal:a.data("modal"),button:a.data("modal-button"),loader:{id:a.data("loader"),idloader:a.data("loader-idloader"),overlay:a.data("loader-overlay"),params:a.data("loader-params")?a.data("loader-params"):{}},backdrop:!0,keyboard:!0,focus:!0,show:!0,size:a.data("modal-size")?a.data("modal-size"):"",target:a.data("modal-target")?a.data("modal-target"):"popup-modal"},a.data("modal-content"))}),n(document).on("click","#navbar-search",function(a){a.preventDefault(),n(this).closest(".navbar").addClass("searchshow")}),n(window).on("popstate",function(){n('[data-readmore="container"]').readMore(),n("[data-auto-height]").autoHeight(),s(n('[data-search="true"]')),(new o).init(),(new a).init()}),n(document).on("active.un.reload",function(){var a=n("#chat-friends-list");a.data("ajaxUNRequest")&&a.data("ajaxUNRequest").ajax()}),n(document).on("requireajax.un.shown","[data-loaded]",function(a){var t=a.relatedTarget;a.response.endPage&&t.$container.data("LoadedScrollAjax")&&t.$container.data("LoadedScrollAjax").setLoaded(!0)}).on("action.un.modal.end requireajax.un.shown filter.un.shown shown.bs.popover loadedscroll.un.shown",function(){window.myLazyLoad.update(),n('[data-readmore="container"]').readMore(),n("[data-auto-height]").autoHeight(),s(n('[data-search="true"]')),(new o).init(),(new a).init(),n('[data-toggle="_tooltip"]').tooltip()}).on("action.un.modal.end requireajax.un.shown chat.un.shown dialog.un.shown comment.un.shown loadedscroll.un.shown",function(){n("time").timeago()}).on("shown.un.modal",function(a){s(n(a.target).find('[data-search="true"]'))}),n(document).on("click","[data-images]",function(){n.fancybox.open(n(this).data("images"))}),n(function(){n('[data-auto-maxwidth="container"]').autoMaxWidth(),n('[data-readmore="container"]').readMore(),n("[data-auto-height]").autoHeight(),new i("#icon-bar")}),n(function(){n("time").timeago()}),n(document).on("click",'[data-toggle="spoiler"]',function(){n(this).parent().children().toggleClass("d-none")}).on("click",".spoiler-before, .spoiler-after",function(){n(this).siblings('[data-toggle="spoiler"]').trigger("click")}),n(function(){s(n('[data-search="true"]'))}),n(function(){new d}),n(document).on("mouseenter",'[data-toggle="popover-content"]',function(){"ontouchstart"in document.documentElement&&!n(this).data("ontouchstart")||n(this).data("popover-open")||new r(this)}).on("shown.bs.popover",function(a){n(a.target).popover("update")}),n(document).popover({selector:'[data-toggle="popover"]'}),n(document).tooltip({selector:'[data-toggle="tooltip"]',trigger:"hover"}),n(document).on("requireajax.un.shown","#video-player",function(a){c({id:".owl-carousel"},n(a.target)),l({id:".set-slider"},a.target)}),n(function(){c({id:".owl-carousel"}),l({id:".set-slider"})}),n(document).on("click",'[data-close="false"]',function(a){a.stopPropagation()}),n(document).on("requireajax.un.show","#sorter .sorter-item",function(a){var t=n(a.target);t.siblings(".active").removeClass("active"),t.addClass("active")}).on("requireajax.un.start","#sorter .sorter-item",function(a){n(a.target).hasClass("active")&&a.preventDefault()}),n(document).on("requireajax.un.show","#released-episodes-more",function(a){var t=a.target,e=a.relatedTarget.$container;e.off("requireajax.un.shown"),e.on("requireajax.un.shown",function(){e.closest(".released-episodes-container").addClass("open"),e.slideDown("fast",function(){var a=t.parentNode;a.parentNode.removeChild(a)})})}),n(document).on("requireajax.un.show","[data-watched-id]",function(a){var t=a.response;"success"===t.status&&Array.prototype.forEach.call(document.querySelectorAll('[data-watched-id="'+t.id+'"]'),function(a){"create"===t.message?(a.classList.add("watched"),a.setAttribute("data-original-title",a.getAttribute("data-watched-text"))):(a.classList.remove("watched"),a.setAttribute("data-original-title",a.getAttribute("data-watch-text")))})}).on("requireajax.un.shown",".my-list-anime",function(a){var t=a.response;"success"===t.status&&(2==t.type?Array.prototype.forEach.call(document.querySelectorAll("[data-watched-id]"),function(a){a.classList.add("watched"),a.setAttribute("data-original-title",a.getAttribute("data-watched-text"))}):6==t.type&&Array.prototype.forEach.call(document.querySelectorAll("[data-watched-id]"),function(a){a.classList.remove("watched"),a.setAttribute("data-original-title",a.getAttribute("data-watch-text"))}))}),n(document).on("shown.bs.collapse",function(){window.myLazyLoad.update()})});