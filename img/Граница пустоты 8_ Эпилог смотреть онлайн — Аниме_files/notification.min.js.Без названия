define(["jquery","setNumNotification","realTimeSocket","realTime/notificationSound"],function(e,n,t,o){"use strict";e(document).on("requireajax.un.show",".notification-request, .friend-request",function(e){var n=e.response;"success"===n.status&&t.emit("notificationRequest",{room:n.user.id,response:n.user})}),e(document).on("loadedscroll.un.visible.ajax",".friend-notification-container",function(e){var t=e.response;if("notification"===t.type){var o=document.querySelectorAll('[data-notifi-count="friendrequest"]');o&&new n(o,t.numFriend)}}),e(document).on("requireajax.un.show",'[data-ajax-request="remove-notification"]',function(e){var t=e.response,o=document.querySelectorAll('[data-notifi-count="all"]');o&&new n(o,t.numNotification);var i=document.querySelectorAll('[data-notifi-count="friendrequest"]');i&&new n(i,t.numFriend)}).on("requireajax.un.start","#notification-menu .list-group-item",function(n){e(n.target).hasClass("active")&&n.preventDefault()}).on("requireajax.un.show","#notification-menu .list-group-item",function(n){var t=e(n.target);t.siblings().removeClass("active"),t.addClass("active")}).on("loadedscroll.un.visible.ajax",".notification-container",function(e){var t=e.response;if("notification"===t.type){var o=document.querySelectorAll('[data-notifi-count="all"]');o&&new n(o,t.numNotification)}}),e(document).on("requireajax.un.start","[data-dropdown-loaded]",function(n){var t=e(n.target);if(n.relatedTarget.isLoaded()){var o=t.closest("[data-dropdown-loaded]").find("[data-loaded]");o.data("LoadedScrollAjax")&&o.data("LoadedScrollAjax").scroll()}});var i=function(){};return i.prototype={response:function(e){if("request"!==e.response.action&&"confirmed"!==e.response.action||new o("notice"),"request"===e.response.action){var t=document.querySelectorAll('[data-notifi-count="friendrequest"]');t&&new n(t,e.response.numFriend)}if("confirmed"===e.response.action){var i=document.querySelectorAll('[data-notifi-count="all"]');i&&new n(i,e.response.numNotification)}}},new i});