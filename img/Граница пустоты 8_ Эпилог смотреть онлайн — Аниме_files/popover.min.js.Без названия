define(["jquery","bootstrap"],function(e){"use strict";var o=function(o){this.$element=e(o),this.$popover=null,this.$group=null,this.popoverMouseenter=null,this.popoverMouseleave=null,this.delay={open:250,close:800},this.prefix="pGroup",this.ariaDescribedby=null,this.MAX_UID=1e6,this.init()};return o.prototype={init:function(){"ontouchstart"in document.documentElement&&(this.delay={open:0,close:0}),this.eventOff(),this.$element.data("constraints")&&(this.constraints=this.$element.data("constraints")),this.popoverMouseenter=setTimeout(function(){this.$element.popover("show"),this.$element.data("popover-open",!0)}.bind(this),this.delay.open),this.$element.on("show.bs.popover",function(){this.group()}.bind(this)),this.$element.on("shown.bs.popover",function(){this.$popover=e("#"+this.$element.attr("aria-describedby")),this.$popover.find('[data-toggle="popover-content"]').each(function(o,t){var i=e(t);i.data("popover-parent-group")||i.data("popover-parent-group",this.ariaDescribedby)}.bind(this)),this.hoverPopover()}.bind(this)),this.$element.on("mouseenter.p.mouseenter",this.mouseenter.bind(this)).on("mouseleave.p.mouseleave",this.mouseleave.bind(this)),this.$element.one("hidden.bs.popover",function(){this.eventOff(),this.$element.data("popover-open",!1),this.$element.closest("."+this.prefix).length||e("#"+this.ariaDescribedby).children("."+this.prefix).remove()}.bind(this))},group:function(){var o;this.$element.data("popover-group")?(this.ariaDescribedby=this.$element.data("popover-group"),o=e("#"+this.ariaDescribedby)):(this.ariaDescribedby=~~(Math.random()*this.MAX_UID),this.$element.data("popover-group",this.ariaDescribedby),o=e('<div class="'+this.prefix+'" id="'+this.ariaDescribedby+'"></div>'),this.$element.data("popover-parent-group")?e("#"+this.$element.data("popover-parent-group")).append(o):e("body").append(o),this.$element.data("bs.popover").config.container="#"+this.ariaDescribedby),this.$group=o},hoverPopover:function(){var e=this;this.hoverPopoverEventOff(),this.$group.on({mouseenter:function(){e.clearTimeoutHover()},mouseleave:function(){e.clearTimeoutHover(),e.popoverMouseleave=setTimeout(e.closePopover.bind(e),e.delay.close)}})},mouseenter:function(){this.clearTimeoutHover()},mouseleave:function(){var e=this;this.clearTimeoutHover(),this.popoverMouseleave=setTimeout(function(){e.closePopover()},this.delay.close)},closePopover:function(){this.$element.popover("hide")},eventOff:function(){this.$element.off("mouseenter.p.mouseenter"),this.$element.off("mouseleave.p.mouseleave"),this.$element.off("shown.bs.popover"),this.$element.off("hidden.bs.popover"),this.popoverEventOff(),this.hoverPopoverEventOff()},popoverEventOff:function(){this.$popover&&(this.$popover.off("mouseenter"),this.$popover.off("mouseleave"))},hoverPopoverEventOff:function(){this.$group&&(this.$group.off("mouseenter"),this.$group.off("mouseleave"))},clearTimeoutHover:function(){clearTimeout(this.popoverMouseenter),clearTimeout(this.popoverMouseleave)}},o});